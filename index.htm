<!DOCTYPE html>
<html class="ocks-org do-not-copy">
<head>
	<meta charset="utf-8" />
	<title>Bitcoin Transactions</title>

	<style>

		#chart {
		  height: 100%;
		}

		.node rect {
		  cursor: move;
		  fill-opacity: .9;
		  shape-rendering: crispEdges;
		}

		.node text {
		  pointer-events: none;
		  text-shadow: 0 1px 0 #fff;
		}

		.link {
		  fill: none;
		  stroke: #000;
		  stroke-opacity: .2;
		}

		.link:hover {
		  stroke-opacity: .5;
		}
	</style>
</head>
<body>

<h1>Bitcoin Transactions</h1>

<p>Each node represents an address. They are labeled with the last six digits of the address. The lines represent transactions between nodes. Nodes on the left are sending bitcoins to nodes on the right.</p>

<p id="chart"></p>

<input type="button" value="get data" id="btn" />
<input type="text" value="1AJbsFZ64EpEfS5UAjAfcUG8pH8Jn3rn1F" id="txt" />
<div id="result">TEXT</div>

<script src="http://d3js.org/d3.v2.min.js?2.9.1"></script>
<script src="sankey.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script src="vis.js"></script>

<script>

var myJSON;

<!-- Resources: http://stackoverflow.com/questions/15008867/odd-behavior-of-my-jquery-shorthand-get-ajax-method-and-its-callback-funct -->

$.get($(this).attr("href"), function(){

	$("#btn").click(function() {
		reference = document.getElementById('txt').value;
		myJSON = $.getJSON('http://blockchain.info/address/' + reference + '?format=json', function() { console.log("Success!"); })
			.done(function() { console.log( "second success" ); })
			.fail(function() { console.log( "error" ); })
			.always(function() { console.log( "complete" ); });
		
		$('div#result').text("Address: " + Object.keys(myJSON));
		console.log("It worked? " + myJSON.address);
	});

	$(document).ajaxError(function(event, request, settings) {
		alert( "Error requesting page " + settings.url);
	});

}, "html");

</script>
	
<!--CASEY DO-->

<script type="text/javascript">

	var d3Globals = function() {
		var width = 1380,
		height = 740,
		cellColorA = '#EAEAEA',
		cellColorB = '#FFFFFF';
	}

	function drawGraphs(){
		var outerRadius = 200;
		var innerRadius = 0;
		var pie = d3.layout.pie();
		var color = d3.scale.category10();
		var arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);
		
		
	}


</script>
</body>
</html>